<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TRIAL-FORMA: SMT-based Patient‚ÄìTrial Matching</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="TRIAL-FORMA: An SMT-based system for precise, clause-level patient‚Äìtrial eligibility matching."
  />
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="page">
    <header>
        <div class="header-flex">
          <!-- Logo -->
          <img src="forma_wide.png" alt="TrialFORMA Logo" class="header-logo" />
      
          <!-- Title block -->
          <div class="header-titles">
            <h1>
              FORMA:<br>
              Formal Reasoning and Modelling Agent
            </h1>
            <h2>An Application to Clinical Trials</h2>
          </div>
        </div>
      
        <div class="authors-with-affiliations">

            <div class="author-line">
              <span class="author">Cyrus Z Zhou<sup>1</sup></span>,
              <span class="author">Yufei Jin<sup>2</sup></span>,
              <span class="author">Yilin Xu<sup>3</sup></span>,
              <span class="author">Chieh-Ju Chao<sup>1,4</sup></span>,
              <span class="author">Monica S Lam<sup>1</sup></span>
            </div>
          
            <div class="affiliation-line">
              <span><sup>1</sup> Stanford University</span>
              <span><sup>2</sup> UCLA</span>
              <span><sup>3</sup> JHU</span>
              <span><sup>4</sup> Mayo Clinic</span>
            </div>
          
        </div>
      
        <div class="affiliation">
          Stanford-OVAL
        </div>
      
        <div class="pill-row">
          <a href="https://arxiv.org/abs/xxxx.xxxxx" target="_blank" rel="noreferrer">
            üìÑ Paper (arXiv)
          </a>
          <a href="https://trialforma.com" target="_blank" rel="noreferrer">
            üåê Project Page
          </a>
          <a href="#bibtex">
            üìö BibTeX
          </a>
        </div>
      
        <div class="pill-tag">Project Website ¬∑ Last updated: Nov 2025</div>
    </header>
      
    <section id="news" class="news-section">
        <h3>News & Updates</h3>
      
        <ul class="news-list">
            <li class="news-item">
                <span class="news-date">December 10, 2025</span>
                <span class="news-title">Poster Presentation at Stanford AI+HEALTH 2025</span>
                <span class="news-desc">Present TrialFORMA at
                    <a href="https://medhub.stanford.edu/event/aihealth2025/summary" target="_blank" rel="noreferrer">
                        Stanford AI+HEALTH 2025</a>
                     poster session. <a href="https://medhub.stanford.edu/event/aihealth2025/summary" target="_blank" rel="noreferrer">
                        Poster Link</a>
                    </span>
            </li>
        
            <li class="news-item">
                <span class="news-date">December 1, 2025</span>
                <span class="news-title">Public Website Launch</span>
                <span class="news-desc">TrialFORMA project website is now live at trialforma.com.</span>
            </li>
        
            <li class="news-item">
                <span class="news-date">November, 2025</span>
                <span class="news-title">Evaluating the system</span>
                <span class="news-desc">Preliminary benchmarks show high recall and transparent eligibility reasoning.</span>
            </li>
      
        </ul>
      </section>

    <section class="teaser">
      <!-- Replace with your own image -->
      <img src="teaser.png" alt="System overview or key result figure" />
      <div class="teaser-caption">
        Figure 1: High-level overview of TRIAL-FORMA. Clinical trial
        eligibility criteria and patient notes are mapped to a shared
        SMT-based logical representation, enabling clause-level, exact
        reasoning instead of approximate embedding-based matching.
      </div>
    </section>

    <section id="abstract">
      <h3>Abstract</h3>

    <p>
        Effective patient-trial matching lies at the heart of clinical research. Despite spending approximately <strong>$1.9 billion</strong> annually on recruitment, nearly <strong>80%</strong> of clinical trials still fail to meet their enrollment targets. Errors in patient-trial matching are high-stakes on both recall and precision: false negatives deny patients from potentially life-saving options, while false positives steer patients toward infeasible or unsafe trials. Yet current pipelines leveraging embedding-based retrieval are optimized to minimize aggregate retrieval loss rather than eliminate mismatches for each patient-trial pair, making them structurally ill-suited to this safety-critical task.
    </p>
    <p>
        We present <strong>TrialFORMA (FOmal Reasoning and Modeling Agent)</strong>, a system for patient‚Äìtrial matching that grounds patient records and eligibility criteria in a shared formal SMT (Satisfiability Modulo Theories) representation. Unlike recent approaches that merely minimize error rates, TrialFORMA is designed around an exactness objective, aiming‚Äîwithin its formal representation‚Äîto eliminate both false negatives and false positives.
    </p>
    <p>
        Attempting to represent both patient records and trial eligibility criteria in SMT confronts us with several challenges: (1) imperfect semantic parsing from natural language into SMT predicates; (2) substantial variation in concept names and surface expressions across trials and patient records; and (3) incomplete clinical ontologies that omit relevant concepts and relations. 
    </p>
    <p>
        To address these challenges, we develop a family of agentic workflows that (1) semantically parse natural language into SMT; (2) perform concept canonicalization and expression schematization; and (3) bridge missing links in the underlying clinical ontologies.
    </p>
    <p>
        Preliminary experiments on standard patient‚Äìtrial matching benchmarks show that TrialFORMA achieves near-perfect recall at high precision, while providing clause-level auditability of eligibility decisions. These results establish symbolic, logic-based matching as an accurate and transparent foundation for high-stake clinical eligibility workflows.
    </p>
    </section>

    <section id="capabilities" class="key-capabilities">
        <h3>Key capabilities</h3>
        <ul class="capability-list">
          <li class="capability-item">
            <span class="capability-title">Compiler from trials ‚Üí SMT:</span>
             Turns free-form eligibility criteria into typed logical constraints
            (CNF / SMT-LIB v2).
          </li>
      
          <li class="capability-item">
            <span class="capability-title">Ontology-aware entailment:</span>
            Uses SNOMED / UMLS hierarchies to support principled subsumption
            (e.g., Type 2 diabetes ‚äë Diabetes mellitus).
          </li>
      
          <li class="capability-item">
            <span class="capability-title">Patient schematization:</span>
            From raw EHR/notes to normalized patient facts; supports optional LLM‚Äëassisted diagnoses with guardrails.
          </li>
      
          <li class="capability-item">
            <span class="capability-title">Relation curation:</span>
            Curating missing relations in SNOMED/UMLS ontology, including "may entail".
          </li>
      
          <li class="capability-item">
            <span class="capability-title">Designs for scalability:</span>
            SMT2PL projection, Database Optimization (Constraints as Database Tables), Key-Value Cache Optimization for Ontology Curation and Entailmen
          </li>
      
          <li class="capability-item">
            <span class="capability-title">Deterministic matching:</span>
            SMT solver yields exact satisfiability with <strong>proof‚Äëcarrying explanations</strong> (unsat cores/assumptions optional).
          </li>
        </ul>
      </section>
      

    <section id="results">
      <h3>Results</h3>
      <div class="columns">
        <div>
          <p>
            We evaluate TRIAL-FORMA on a held-out set of patient‚Äìtrial pairs
            with expert labels. Our system improves strict eligibility
            classification compared to a strong embedding-based baseline
            while providing interpretable reasoning traces.
          </p>
          <table class="result-table">
            <thead>
              <tr>
                <th>Method</th>
                <th>Accuracy</th>
                <th>Precision</th>
                <th>Recall</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Embedding-based Retrieval</td>
                <td>##</td>
                <td>##</td>
                <td>##</td>
              </tr>
              <tr>
                <td><strong>TRIAL-FORMA (ours)</strong></td>
                <td><strong>##</strong></td>
                <td><strong>##</strong></td>
                <td><strong>##</strong></td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- <div>
          <p><strong>Demo Highlights</strong></p>
          <ul>
            <li>Interactive inspection of satisfied / violated constraints</li>
            <li>Support for temporal reasoning (time windows, durations)</li>
            <li>Modular trial and patient representation for debugging</li>
          </ul>
        </div>
      </div> -->
    </section>

    <section id="resources">
      <h3>Resources</h3>
      <p>
        <strong>Paper:</strong>
        <a href="https://arxiv.org/abs/xxxx.xxxxx" target="_blank" rel="noreferrer">
          arXiv:xxxx.xxxxx
        </a>
      </p>
      <p>
        <strong>Dataset:</strong>
        <a href="https://data.csiro.au/collection/csiro:17152" target="_blank" rel="noreferrer"> SIGIR 2016</a> corpus , 
        <a href="https://www.trec-cds.org/2021.html" target="_blank" rel="noreferrer">TREC Clinical Trials 2021</a> corpus, 
        <a href="https://www.trec-cds.org/2022.html" target="_blank" rel="noreferrer">TREC Clinical Trials 2022</a> corpus
      </p>
      <p>
        <strong>Contact:</strong> zikai@stanford.edu
      </p>
    </section>

    <section id="bibtex">
      <h3>BibTeX</h3>
      <pre><code>@software{forma_clinical_trial_matching,
        title = {FORMA: Formal Reasoning and Modelling Agent},
        subtitle = {An Application to Clinical Trials},
        author = {Cyrus Zhou, Yufei Jin, Yilin Xu, Chieh-Ju Chao, Monica S Lam},
        year = {2025},
        url = {https://github.com/stanford-oval/trial-forma}
      }</code></pre>
    </section>

    <footer>
      ¬© 2025 TRIAL-FORMA. This project page is built with GitHub Pages.
    </footer>
  </main>
</body>
</html>
